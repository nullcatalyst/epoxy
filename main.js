#!/usr/bin/env node
"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}function r(){delete require.cache[p];const e=require(p);e.sources&&e.outputs||process.exit();let l=o(e.outputs),a=new s({watch:!!e.watch,sources:o(e.sources)});l.map(e=>{const r=new u(a,e.entry,{minify:!!e.minify,file:e.file,data:e.data});return r.on("output",r=>{e.file?c(n.dirname(e.file),(o,n)=>{if(o)return console.error(o);t.writeFile(e.file,r,{encoding:"utf8"},r=>{if(r)return console.error(r);console.log("Output",e.file)})}):(console.log("["+e.entry+"]:"),console.log(r+"\n"))}),r});const f=i.watch(p,{ignoreInitial:!0}).on("change",()=>{f.close(),a.stop(),r()}).on("unlink",()=>{f.close(),a.stop()})}function o(e){return Array.isArray(e)?e:[e]}var t=require("fs"),n=require("path"),i=require("chokidar"),c=e(require("mkdirp"));const{Library:s,Application:u}=require("./lib"),l=process.argv,a=l.length,f="epoxy.config.js",p=n.resolve(2===a?"epoxy.config.js":l[2]);r();
