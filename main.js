#!/usr/bin/env node
"use strict";function e(){const r=JSON.parse(n.readFileSync(a,{encoding:"utf8"}));r.sources&&r.outputs||process.exit();let c=o(r.outputs),u=new i({watch:!!r.watch,sources:o(r.sources)});c.map(e=>{const o=new s(u,e.entry,{minify:!!e.minify,file:e.file,data:e.data});return o.on("output",o=>{e.file?n.writeFile(e.file,e,{encoding:"utf8"},e=>{e&&console.error(e)}):(console.log("["+e.entry+"]:"),console.log(o+"\n"))}),o});const l=t.watch(a,{ignoreInitial:!0}).on("change",()=>{l.close(),u.stop(),e()}).on("unlink",()=>{l.close(),u.stop()})}function o(e){return Array.isArray(e)?e:[e]}var n=require("fs"),r=require("path"),t=require("chokidar");const{Library:i,Application:s}=require("./lib"),c=process.argv,u=c.length,a=r.resolve(2===u?"epoxy.config.json":c[2]);e();
